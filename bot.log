
2025-06-02 02:10:24,881 - INFO - ЗАПУСК НОВОЙ ВЕРСИИ БОТА (с исправлениями от 2025-06-02 02:10:24)
2025-06-02 02:10:24,881 - INFO - Запуск CheckSiteUpdateBot с уровнем логирования: INFO
2025-06-02 02:10:24,881 - INFO - [smart_bot] main: bot_shared_data prepared. Keys: ['user_settings_ref', 'save_user_settings_async_func', 'reply_markup_for_lang_func', 'UserStepsEnum', 'USER_DATA_STEP_KEY', 'USER_DATA_LANG_KEY', 'premium_tiers_ref', 'user_addresses_ref', 'save_tracked_data_async_func', 'translations_ref', 'config_ref']
2025-06-02 02:10:24,881 - INFO - [smart_bot] main: bot_shared_data function 'save_user_settings_async_func' is callable.
2025-06-02 02:10:24,881 - INFO - [smart_bot] main: bot_shared_data function 'reply_markup_for_lang_func' is callable.
2025-06-02 02:10:24,881 - INFO - [smart_bot] main: bot_shared_data function 'UserStepsEnum' is callable.
2025-06-02 02:10:24,881 - INFO - [smart_bot] main: bot_shared_data function 'save_tracked_data_async_func' is callable.
2025-06-02 02:10:27,072 - INFO - [smart_bot] main: Application built successfully with bot_data.
2025-06-02 02:10:27,073 - INFO - [smart_bot] main: CommandHandlers registered.
2025-06-02 02:10:27,073 - INFO - [smart_bot] main: Message and CallbackQuery Handlers registered.
2025-06-02 02:10:27,074 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-02 02:10:27,075 - INFO - [smart_bot] main: JobQueue task 'periodic_site_check_job' scheduled to run every 60s.
2025-06-02 02:10:27,075 - INFO - Бот начал опрос...
2025-06-02 02:10:27,422 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getMe "HTTP/1.1 200 OK"
2025-06-02 02:10:27,432 - INFO - [smart_bot] Bot post_init_hook: Загрузка данных...
2025-06-02 02:10:27,434 - INFO - Загружены настройки для 1 пользователей.
2025-06-02 02:10:27,437 - INFO - Загружены адреса для 1 пользователей.
2025-06-02 02:10:27,438 - INFO - Загружена история уведомлений для 0 пользователей.
2025-06-02 02:10:27,438 - INFO - Данные бота успешно загружены.
2025-06-02 02:10:27,516 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/deleteWebhook "HTTP/1.1 200 OK"
2025-06-02 02:10:27,519 - INFO - Added job "periodic_site_check_job" to job store "default"
2025-06-02 02:10:27,519 - INFO - Scheduler started
2025-06-02 02:10:27,519 - INFO - Application started
2025-06-02 02:10:30,839 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:10:30,840 - INFO - [smart_bot] /start command from user 7230593037
2025-06-02 02:10:30,942 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:10:37,078 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:11:37 UTC)" (scheduled at 2025-06-01 22:10:37.073996+00:00)
2025-06-02 02:10:37,079 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:10:37,079 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:10:37,079 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:10:37,080 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:10:37,080 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:11:37 UTC)" executed successfully
2025-06-02 02:10:40,956 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:10:51,033 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:11:01,110 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:11:11,189 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:11:21,267 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:11:21,540 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:11:21,541 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u0532\u0561\u0580\u0587', lang='hy', current_step='UserSteps.NONE'
2025-06-02 02:11:21,601 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u0532\u0561\u0580\u0587'
2025-06-02 02:11:21,601 - INFO - [smart_bot] Unknown command/button '\u0532\u0561\u0580\u0587' from user 7230593037 in step NONE.
2025-06-02 02:11:21,846 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:11:31,680 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:11:32,566 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:11:32,567 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2795 \u0531\u057e\u0565\u056c\u0561\u0581\u0576\u0565\u056c \u0570\u0561\u057d\u0581\u0565', lang='hy', current_step='UserSteps.NONE'
2025-06-02 02:11:32,567 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2795 \u0531\u057e\u0565\u056c\u0561\u0581\u0576\u0565\u056c \u0570\u0561\u057d\u0581\u0565'
2025-06-02 02:11:32,904 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:11:37,084 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:12:37 UTC)" (scheduled at 2025-06-01 22:11:37.073996+00:00)
2025-06-02 02:11:37,084 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:11:37,084 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:11:37,085 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:11:37,085 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:11:37,085 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:12:37 UTC)" executed successfully
2025-06-02 02:11:42,650 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:11:52,729 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:11:54,424 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:11:54,427 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u274c \u0549\u0565\u0572\u0561\u0580\u056f\u0565\u056c', lang='hy', current_step='UserSteps.AWAITING_REGION'
2025-06-02 02:11:54,428 - INFO - [smart_bot] handle_text_message: Cancel button pressed by user 7230593037
2025-06-02 02:11:54,685 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:11:59,565 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:11:59,566 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2795 \u0531\u057e\u0565\u056c\u0561\u0581\u0576\u0565\u056c \u0570\u0561\u057d\u0581\u0565', lang='hy', current_step='UserSteps.NONE'
2025-06-02 02:11:59,566 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2795 \u0531\u057e\u0565\u056c\u0561\u0581\u0576\u0565\u056c \u0570\u0561\u057d\u0581\u0565'
2025-06-02 02:11:59,662 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:12:00,824 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:12:00,825 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u0535\u0580\u0587\u0561\u0576', lang='hy', current_step='UserSteps.AWAITING_REGION'
2025-06-02 02:12:00,920 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:12:10,932 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:12:21,009 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:12:31,087 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:12:37,092 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:13:37 UTC)" (scheduled at 2025-06-01 22:12:37.073996+00:00)
2025-06-02 02:12:37,092 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:12:37,092 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:12:37,092 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:12:37,093 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:12:37,093 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:13:37 UTC)" executed successfully
2025-06-02 02:12:41,164 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:12:51,240 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:13:01,318 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:13:10,882 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:13:10,882 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u0540\u0561\u0574\u0578 \u054d\u0561\u0570\u0575\u0561\u0576', lang='hy', current_step='UserSteps.AWAITING_STREET'
2025-06-02 02:13:10,887 - INFO - Резервная копия создана для addresses.json в backups\addresses.backup_20250602_021310.json
2025-06-02 02:13:10,890 - INFO - Данные успешно сохранены в addresses.json
2025-06-02 02:13:10,906 - INFO - Резервная копия создана для notified.json в backups\notified.backup_20250602_021310.json
2025-06-02 02:13:10,908 - INFO - Данные успешно сохранены в notified.json
2025-06-02 02:13:11,156 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:13:11,157 - INFO - Starting parse_all_water_announcements_async...
2025-06-02 02:13:11,157 - INFO - Fetching water announcements from https://interactive.vjur.am/ (async)...
2025-06-02 02:13:12,241 - INFO - Starting parse_all_gas_announcements_async...
2025-06-02 02:13:12,241 - INFO - Fetching gas announcements (async)...
2025-06-02 02:13:13,244 - INFO - Fetching from https://armenia-am.gazprom.com/notice/announcement/vtar/...
2025-06-02 02:13:13,244 - INFO - Starting parse_all_electric_announcements_async...
2025-06-02 02:13:13,245 - INFO - Fetching electric announcements from https://www.ena.am/Info.aspx?id=5&lang=1 (async)...
2025-06-02 02:13:14,507 - INFO - HTTP Request: GET https://interactive.vjur.am/ "HTTP/1.1 200 OK"
2025-06-02 02:13:14,535 - INFO - Fetched 10 raw water announcements from https://interactive.vjur.am/.
2025-06-02 02:13:14,535 - INFO - Fetched 10 water texts. Starting extraction...
2025-06-02 02:13:14,535 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:13:14,535 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:13:14,535 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:13:14,535 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:13:14,535 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:13:14,535 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:13:14,536 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:13:14,536 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:13:14,536 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:13:14,536 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:13:14,536 - ERROR - Exception during water info extraction task for text 1: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:13:14,536 - ERROR - Exception during water info extraction task for text 2: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:13:14,536 - ERROR - Exception during water info extraction task for text 3: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:13:14,536 - ERROR - Exception during water info extraction task for text 4: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:13:14,536 - ERROR - Exception during water info extraction task for text 5: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:13:14,537 - ERROR - Exception during water info extraction task for text 6: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:13:14,537 - ERROR - Exception during water info extraction task for text 7: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:13:14,537 - ERROR - Exception during water info extraction task for text 8: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:13:14,537 - ERROR - Exception during water info extraction task for text 9: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:13:14,537 - ERROR - Exception during water info extraction task for text 10: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:13:14,537 - INFO - Total water announcements successfully processed into JSON: 0 (out of 10 fetched raw texts)
2025-06-02 02:13:14,543 - INFO - HTTP Request: GET https://www.ena.am/Info.aspx?id=5&lang=1 "HTTP/1.1 200 OK"
2025-06-02 02:13:14,714 - INFO - No electric announcements found with 'div.items div.panel-group div.panel-body' on https://www.ena.am/Info.aspx?id=5&lang=1. Found 0 items.
2025-06-02 02:13:14,715 - INFO - Fetched 0 raw electric announcements from https://www.ena.am/Info.aspx?id=5&lang=1.
2025-06-02 02:13:14,715 - INFO - No electric announcement texts fetched.
2025-06-02 02:13:14,967 - INFO - HTTP Request: GET https://armenia-am.gazprom.com/notice/announcement/vtar/ "HTTP/1.1 200 OK"
2025-06-02 02:13:15,007 - INFO - No gas announcements found with selector on https://armenia-am.gazprom.com/notice/announcement/vtar/
2025-06-02 02:13:15,007 - INFO - Fetched 0 items from https://armenia-am.gazprom.com/notice/announcement/vtar/
2025-06-02 02:13:15,007 - INFO - Fetching from https://armenia-am.gazprom.com/notice/announcement/plan/...
2025-06-02 02:13:15,277 - INFO - HTTP Request: GET https://armenia-am.gazprom.com/notice/announcement/plan/ "HTTP/1.1 200 OK"
2025-06-02 02:13:15,318 - INFO - No gas announcements found with selector on https://armenia-am.gazprom.com/notice/announcement/plan/
2025-06-02 02:13:15,318 - INFO - Fetched 0 items from https://armenia-am.gazprom.com/notice/announcement/plan/
2025-06-02 02:13:15,318 - INFO - Total fetched 0 raw gas announcements from all sources.
2025-06-02 02:13:15,318 - INFO - No gas announcement texts fetched.
2025-06-02 02:13:15,407 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:13:20,959 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:13:24,000 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:13:24,001 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\U0001f50d \u054d\u057f\u0578\u0582\u0563\u0565\u056c \u0570\u0561\u057d\u0581\u0565\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 02:13:24,046 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\U0001f50d \u054d\u057f\u0578\u0582\u0563\u0565\u056c \u0570\u0561\u057d\u0581\u0565\u0576'
2025-06-02 02:13:24,289 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:13:34,126 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:13:37,094 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:14:37 UTC)" (scheduled at 2025-06-01 22:13:37.073996+00:00)
2025-06-02 02:13:37,094 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:13:37,094 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:13:37,095 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:13:37,095 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:13:37,095 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:14:37 UTC)" executed successfully
2025-06-02 02:13:44,205 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:13:54,391 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:14:04,469 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:14:14,546 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:14:18,492 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:14:18,493 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u0540\u0561\u0574\u0578 \u054d\u0561\u0570\u0575\u0561\u0576', lang='hy', current_step='UserSteps.AWAITING_ADDRESS_TO_CHECK'
2025-06-02 02:14:18,493 - INFO - Checking immediate shutdown for: Street='\u0540\u0561\u0574\u0578 \u054d\u0561\u0570\u0575\u0561\u0576', Region='Ереван'
2025-06-02 02:14:18,493 - INFO - Starting parse_all_water_announcements_async...
2025-06-02 02:14:18,493 - INFO - Fetching water announcements from https://interactive.vjur.am/ (async)...
2025-06-02 02:14:19,524 - INFO - Starting parse_all_gas_announcements_async...
2025-06-02 02:14:19,525 - INFO - Fetching gas announcements (async)...
2025-06-02 02:14:20,546 - INFO - Fetching from https://armenia-am.gazprom.com/notice/announcement/vtar/...
2025-06-02 02:14:20,547 - INFO - Starting parse_all_electric_announcements_async...
2025-06-02 02:14:20,547 - INFO - Fetching electric announcements from https://www.ena.am/Info.aspx?id=5&lang=1 (async)...
2025-06-02 02:14:21,636 - INFO - HTTP Request: GET https://interactive.vjur.am/ "HTTP/1.1 200 OK"
2025-06-02 02:14:21,664 - INFO - Fetched 10 raw water announcements from https://interactive.vjur.am/.
2025-06-02 02:14:21,664 - INFO - Fetched 10 water texts. Starting extraction...
2025-06-02 02:14:21,664 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:14:21,665 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:14:21,665 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:14:21,665 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:14:21,665 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:14:21,666 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:14:21,666 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:14:21,666 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:14:21,666 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:14:21,666 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:14:21,667 - ERROR - Exception during water info extraction task for text 1: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:14:21,667 - ERROR - Exception during water info extraction task for text 2: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:14:21,667 - ERROR - Exception during water info extraction task for text 3: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:14:21,667 - ERROR - Exception during water info extraction task for text 4: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:14:21,667 - ERROR - Exception during water info extraction task for text 5: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:14:21,667 - ERROR - Exception during water info extraction task for text 6: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:14:21,667 - ERROR - Exception during water info extraction task for text 7: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:14:21,667 - ERROR - Exception during water info extraction task for text 8: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:14:21,667 - ERROR - Exception during water info extraction task for text 9: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:14:21,668 - ERROR - Exception during water info extraction task for text 10: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:14:21,668 - INFO - Total water announcements successfully processed into JSON: 0 (out of 10 fetched raw texts)
2025-06-02 02:14:21,676 - INFO - HTTP Request: GET https://www.ena.am/Info.aspx?id=5&lang=1 "HTTP/1.1 200 OK"
2025-06-02 02:14:21,881 - INFO - No electric announcements found with 'div.items div.panel-group div.panel-body' on https://www.ena.am/Info.aspx?id=5&lang=1. Found 0 items.
2025-06-02 02:14:21,881 - INFO - Fetched 0 raw electric announcements from https://www.ena.am/Info.aspx?id=5&lang=1.
2025-06-02 02:14:21,881 - INFO - No electric announcement texts fetched.
2025-06-02 02:14:22,002 - INFO - HTTP Request: GET https://armenia-am.gazprom.com/notice/announcement/vtar/ "HTTP/1.1 200 OK"
2025-06-02 02:14:22,040 - INFO - No gas announcements found with selector on https://armenia-am.gazprom.com/notice/announcement/vtar/
2025-06-02 02:14:22,041 - INFO - Fetched 0 items from https://armenia-am.gazprom.com/notice/announcement/vtar/
2025-06-02 02:14:22,041 - INFO - Fetching from https://armenia-am.gazprom.com/notice/announcement/plan/...
2025-06-02 02:14:22,374 - INFO - HTTP Request: GET https://armenia-am.gazprom.com/notice/announcement/plan/ "HTTP/1.1 200 OK"
2025-06-02 02:14:22,483 - INFO - No gas announcements found with selector on https://armenia-am.gazprom.com/notice/announcement/plan/
2025-06-02 02:14:22,483 - INFO - Fetched 0 items from https://armenia-am.gazprom.com/notice/announcement/plan/
2025-06-02 02:14:22,484 - INFO - Total fetched 0 raw gas announcements from all sources.
2025-06-02 02:14:22,484 - INFO - No gas announcement texts fetched.
2025-06-02 02:14:22,768 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:14:31,622 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:14:37,088 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:15:37 UTC)" (scheduled at 2025-06-01 22:14:37.073996+00:00)
2025-06-02 02:14:37,088 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:14:37,088 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:14:37,089 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:14:37,089 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:14:37,089 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:15:37 UTC)" executed successfully
2025-06-02 02:14:41,698 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:14:51,786 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:14:58,727 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:14:58,728 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2795 \u0531\u057e\u0565\u056c\u0561\u0581\u0576\u0565\u056c \u0570\u0561\u057d\u0581\u0565', lang='hy', current_step='UserSteps.NONE'
2025-06-02 02:14:58,728 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2795 \u0531\u057e\u0565\u056c\u0561\u0581\u0576\u0565\u056c \u0570\u0561\u057d\u0581\u0565'
2025-06-02 02:14:59,018 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:15:01,916 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:15:01,917 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u054d\u0575\u0578\u0582\u0576\u056b\u0584', lang='hy', current_step='UserSteps.AWAITING_REGION'
2025-06-02 02:15:02,063 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:15:12,012 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:15:22,092 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:15:29,841 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:15:29,842 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u0554\u0561\u057b\u0561\u0580\u0561\u0576 \u0563\u0575\u0578\u0582\u0572', lang='hy', current_step='UserSteps.AWAITING_STREET'
2025-06-02 02:15:29,856 - INFO - Резервная копия создана для addresses.json в backups\addresses.backup_20250602_021529.json
2025-06-02 02:15:29,859 - INFO - Данные успешно сохранены в addresses.json
2025-06-02 02:15:29,861 - INFO - Удалена старая резервная копия: backups\addresses.json.backup_20250531_003654
2025-06-02 02:15:29,865 - INFO - Резервная копия создана для notified.json в backups\notified.backup_20250602_021529.json
2025-06-02 02:15:29,867 - INFO - Данные успешно сохранены в notified.json
2025-06-02 02:15:29,869 - INFO - Удалена старая резервная копия: backups\notified.json.backup_20250531_003654
2025-06-02 02:15:30,130 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:15:30,131 - INFO - Starting parse_all_water_announcements_async...
2025-06-02 02:15:30,131 - INFO - Fetching water announcements from https://interactive.vjur.am/ (async)...
2025-06-02 02:15:31,191 - INFO - Starting parse_all_gas_announcements_async...
2025-06-02 02:15:31,191 - INFO - Fetching gas announcements (async)...
2025-06-02 02:15:32,233 - INFO - Fetching from https://armenia-am.gazprom.com/notice/announcement/vtar/...
2025-06-02 02:15:32,234 - INFO - Starting parse_all_electric_announcements_async...
2025-06-02 02:15:32,234 - INFO - Fetching electric announcements from https://www.ena.am/Info.aspx?id=5&lang=1 (async)...
2025-06-02 02:15:33,310 - INFO - HTTP Request: GET https://interactive.vjur.am/ "HTTP/1.1 200 OK"
2025-06-02 02:15:33,339 - INFO - Fetched 10 raw water announcements from https://interactive.vjur.am/.
2025-06-02 02:15:33,339 - INFO - Fetched 10 water texts. Starting extraction...
2025-06-02 02:15:33,339 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:15:33,340 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:15:33,340 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:15:33,340 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:15:33,340 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:15:33,340 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:15:33,340 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:15:33,340 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:15:33,340 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:15:33,340 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 02:15:33,341 - ERROR - Exception during water info extraction task for text 1: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:15:33,341 - ERROR - Exception during water info extraction task for text 2: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:15:33,341 - ERROR - Exception during water info extraction task for text 3: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:15:33,341 - ERROR - Exception during water info extraction task for text 4: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:15:33,341 - ERROR - Exception during water info extraction task for text 5: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:15:33,341 - ERROR - Exception during water info extraction task for text 6: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:15:33,341 - ERROR - Exception during water info extraction task for text 7: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:15:33,342 - ERROR - Exception during water info extraction task for text 8: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:15:33,342 - ERROR - Exception during water info extraction task for text 9: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:15:33,342 - ERROR - Exception during water info extraction task for text 10: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 02:15:33,342 - INFO - Total water announcements successfully processed into JSON: 0 (out of 10 fetched raw texts)
2025-06-02 02:15:33,351 - INFO - HTTP Request: GET https://www.ena.am/Info.aspx?id=5&lang=1 "HTTP/1.1 200 OK"
2025-06-02 02:15:33,546 - INFO - No electric announcements found with 'div.items div.panel-group div.panel-body' on https://www.ena.am/Info.aspx?id=5&lang=1. Found 0 items.
2025-06-02 02:15:33,546 - INFO - Fetched 0 raw electric announcements from https://www.ena.am/Info.aspx?id=5&lang=1.
2025-06-02 02:15:33,546 - INFO - No electric announcement texts fetched.
2025-06-02 02:15:33,580 - INFO - HTTP Request: GET https://armenia-am.gazprom.com/notice/announcement/vtar/ "HTTP/1.1 200 OK"
2025-06-02 02:15:33,621 - INFO - No gas announcements found with selector on https://armenia-am.gazprom.com/notice/announcement/vtar/
2025-06-02 02:15:33,621 - INFO - Fetched 0 items from https://armenia-am.gazprom.com/notice/announcement/vtar/
2025-06-02 02:15:33,621 - INFO - Fetching from https://armenia-am.gazprom.com/notice/announcement/plan/...
2025-06-02 02:15:33,880 - INFO - HTTP Request: GET https://armenia-am.gazprom.com/notice/announcement/plan/ "HTTP/1.1 200 OK"
2025-06-02 02:15:33,945 - INFO - No gas announcements found with selector on https://armenia-am.gazprom.com/notice/announcement/plan/
2025-06-02 02:15:33,945 - INFO - Fetched 0 items from https://armenia-am.gazprom.com/notice/announcement/plan/
2025-06-02 02:15:33,946 - INFO - Total fetched 0 raw gas announcements from all sources.
2025-06-02 02:15:33,946 - INFO - No gas announcement texts fetched.
2025-06-02 02:15:34,041 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:15:37,077 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:16:37 UTC)" (scheduled at 2025-06-01 22:15:37.073996+00:00)
2025-06-02 02:15:37,077 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:15:37,077 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:15:37,078 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:15:37,078 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:15:37,078 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:16:37 UTC)" executed successfully
2025-06-02 02:15:39,919 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:15:49,996 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:16:00,075 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:16:10,482 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:16:20,560 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:16:30,639 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:16:37,080 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:17:37 UTC)" (scheduled at 2025-06-01 22:16:37.073996+00:00)
2025-06-02 02:16:37,080 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:16:37,080 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:16:37,081 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:16:37,081 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:16:37,081 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:17:37 UTC)" executed successfully
2025-06-02 02:16:40,717 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:16:50,829 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:16:56,257 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:16:56,260 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f \u0553\u0578\u056d\u0565\u056c \u056c\u0565\u0566\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 02:16:57,532 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f \u0553\u0578\u056d\u0565\u056c \u056c\u0565\u0566\u0578\u0582\u0576'
2025-06-02 02:16:57,532 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 02:16:57,792 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:17:07,613 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:17:16,125 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:17:16,126 - INFO - [smart_bot] handle_text_message: user=7230593037, text='Русский', lang='hy', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 02:17:16,127 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text 'Русский'
2025-06-02 02:17:16,132 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_021716.json
2025-06-02 02:17:16,134 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 02:17:16,468 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:17:16,468 - INFO - [smart_bot] Language set to 'ru' for user 7230593037. Step reset to NONE.
2025-06-02 02:17:25,609 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:17:25,612 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f Изменить язык', lang='ru', current_step='UserSteps.NONE'
2025-06-02 02:17:25,612 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f Изменить язык'
2025-06-02 02:17:25,612 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 02:17:25,858 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:17:27,149 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:17:27,149 - INFO - [smart_bot] handle_text_message: user=7230593037, text='English', lang='ru', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 02:17:27,149 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text 'English'
2025-06-02 02:17:27,163 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_021727.json
2025-06-02 02:17:27,166 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 02:17:27,255 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:17:27,256 - INFO - [smart_bot] Language set to 'en' for user 7230593037. Step reset to NONE.
2025-06-02 02:17:37,095 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:18:37 UTC)" (scheduled at 2025-06-01 22:17:37.073996+00:00)
2025-06-02 02:17:37,095 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:17:37,095 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:17:37,096 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:17:37,097 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:17:37,097 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:18:37 UTC)" executed successfully
2025-06-02 02:17:37,228 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:17:47,310 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:17:57,699 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:18:07,782 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:18:17,863 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:18:28,258 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:18:37,093 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:19:37 UTC)" (scheduled at 2025-06-01 22:18:37.073996+00:00)
2025-06-02 02:18:37,093 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:18:37,093 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:18:37,093 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:18:37,094 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:18:37,094 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:19:37 UTC)" executed successfully
2025-06-02 02:18:38,338 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:18:48,734 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:18:58,812 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:19:08,895 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:19:18,973 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:19:29,053 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:19:37,101 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:20:37 UTC)" (scheduled at 2025-06-01 22:19:37.073996+00:00)
2025-06-02 02:19:37,101 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:19:37,102 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:19:37,102 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:19:37,102 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:19:37,102 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:20:37 UTC)" executed successfully
2025-06-02 02:19:39,133 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:19:49,211 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:19:59,290 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:20:09,369 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:20:19,450 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:20:29,543 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:20:37,084 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:21:37 UTC)" (scheduled at 2025-06-01 22:20:37.073996+00:00)
2025-06-02 02:20:37,084 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:20:37,084 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:20:37,084 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:20:37,085 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:20:37,085 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:21:37 UTC)" executed successfully
2025-06-02 02:20:39,626 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:20:49,703 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:20:59,787 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:21:09,870 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:21:19,953 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:21:30,029 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:21:37,084 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:22:37 UTC)" (scheduled at 2025-06-01 22:21:37.073996+00:00)
2025-06-02 02:21:37,085 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:21:37,085 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:21:37,085 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:21:37,087 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:21:37,087 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:22:37 UTC)" executed successfully
2025-06-02 02:21:40,112 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:21:50,191 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:22:00,276 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:22:10,353 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:22:20,457 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:22:30,595 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:22:37,075 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:23:37 UTC)" (scheduled at 2025-06-01 22:22:37.073996+00:00)
2025-06-02 02:22:37,076 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:22:37,076 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:22:37,076 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:22:37,077 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:22:37,077 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:23:37 UTC)" executed successfully
2025-06-02 02:22:40,733 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:22:50,872 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:22:54,456 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:22:54,459 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f Change language', lang='en', current_step='UserSteps.NONE'
2025-06-02 02:22:54,460 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f Change language'
2025-06-02 02:22:54,460 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 02:22:54,791 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:23:04,546 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:23:14,635 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:23:15,358 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:23:15,359 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u0540\u0561\u0575\u0565\u0580\u0565\u0576', lang='en', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 02:23:15,359 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text '\u0540\u0561\u0575\u0565\u0580\u0565\u0576'
2025-06-02 02:23:15,374 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_022315.json
2025-06-02 02:23:15,376 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 02:23:15,617 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:23:15,618 - INFO - [smart_bot] Language set to 'hy' for user 7230593037. Step reset to NONE.
2025-06-02 02:23:17,051 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:23:17,052 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f \u0553\u0578\u056d\u0565\u056c \u056c\u0565\u0566\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 02:23:17,052 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f \u0553\u0578\u056d\u0565\u056c \u056c\u0565\u0566\u0578\u0582\u0576'
2025-06-02 02:23:17,052 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 02:23:17,191 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:23:19,787 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:23:19,788 - INFO - [smart_bot] handle_text_message: user=7230593037, text='Русский', lang='hy', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 02:23:19,788 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text 'Русский'
2025-06-02 02:23:19,794 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_022319.json
2025-06-02 02:23:19,796 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 02:23:19,799 - INFO - Удалена старая резервная копия: backups\user_settings.json.backup_20250531_211725
2025-06-02 02:23:19,902 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:23:19,903 - INFO - [smart_bot] Language set to 'ru' for user 7230593037. Step reset to NONE.
2025-06-02 02:23:29,886 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:23:30,197 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:23:30,198 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\U0001f50d Проверить адрес', lang='ru', current_step='UserSteps.NONE'
2025-06-02 02:23:30,198 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\U0001f50d Проверить адрес'
2025-06-02 02:23:30,457 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 02:23:37,081 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:24:37 UTC)" (scheduled at 2025-06-01 22:23:37.073996+00:00)
2025-06-02 02:23:37,081 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:23:37,081 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:23:37,081 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:23:37,082 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:23:37,082 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:24:37 UTC)" executed successfully
2025-06-02 02:23:40,283 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:23:50,365 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:24:00,444 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:24:10,521 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:24:20,602 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:24:30,684 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:24:37,091 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:25:37 UTC)" (scheduled at 2025-06-01 22:24:37.073996+00:00)
2025-06-02 02:24:37,091 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 02:24:37,091 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 02:24:37,092 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 02:24:37,092 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 02:24:37,092 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 22:25:37 UTC)" executed successfully
2025-06-02 02:24:40,763 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:24:50,842 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:25:00,924 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:25:11,005 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:25:21,262 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 02:25:31,344 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:03:04,122 - WARNING - Run time of job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:03:37 UTC)" was missed by 0:00:27.048069
2025-06-02 03:03:05,467 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:03:05,469 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u274c Отменить', lang='ru', current_step='UserSteps.AWAITING_ADDRESS_TO_CHECK'
2025-06-02 03:03:05,469 - INFO - [smart_bot] handle_text_message: Cancel button pressed by user 7230593037
2025-06-02 03:03:05,707 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:03:15,546 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:03:25,661 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:03:35,736 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:03:37,078 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:04:37 UTC)" (scheduled at 2025-06-01 23:03:37.073996+00:00)
2025-06-02 03:03:37,078 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:03:37,079 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:03:37,079 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:03:37,079 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:03:37,079 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:04:37 UTC)" executed successfully
2025-06-02 03:03:45,815 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:03:55,881 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:04:05,952 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:04:16,022 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:04:26,091 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:04:36,157 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:04:37,085 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:05:37 UTC)" (scheduled at 2025-06-01 23:04:37.073996+00:00)
2025-06-02 03:04:37,085 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:04:37,085 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:04:37,085 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:04:37,087 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:04:37,087 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:05:37 UTC)" executed successfully
2025-06-02 03:04:46,224 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:04:56,291 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:05:06,358 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:05:16,425 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:05:26,493 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:05:36,563 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:05:37,092 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:06:37 UTC)" (scheduled at 2025-06-01 23:05:37.073996+00:00)
2025-06-02 03:05:37,092 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:05:37,092 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:05:37,092 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:05:37,093 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:05:37,093 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:06:37 UTC)" executed successfully
2025-06-02 03:05:46,640 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:05:57,040 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:06:07,121 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:06:17,189 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:06:27,257 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:06:37,101 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:07:37 UTC)" (scheduled at 2025-06-01 23:06:37.073996+00:00)
2025-06-02 03:06:37,102 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:06:37,102 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:06:37,102 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:06:37,103 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:06:37,103 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:07:37 UTC)" executed successfully
2025-06-02 03:06:37,334 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:06:47,403 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:06:57,469 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:07:07,535 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:07:17,601 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:07:27,670 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:07:37,080 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:08:37 UTC)" (scheduled at 2025-06-01 23:07:37.073996+00:00)
2025-06-02 03:07:37,080 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:07:37,080 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:07:37,080 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:07:37,080 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:07:37,080 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:08:37 UTC)" executed successfully
2025-06-02 03:07:37,735 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:07:47,803 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:07:57,869 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:08:07,938 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:08:18,005 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:08:28,072 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:08:37,091 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:09:37 UTC)" (scheduled at 2025-06-01 23:08:37.073996+00:00)
2025-06-02 03:08:37,091 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:08:37,091 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:08:37,091 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:08:37,092 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:08:37,092 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:09:37 UTC)" executed successfully
2025-06-02 03:08:38,139 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:08:48,206 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:08:58,271 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:09:08,342 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:09:18,410 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:09:28,479 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:09:37,081 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:10:37 UTC)" (scheduled at 2025-06-01 23:09:37.073996+00:00)
2025-06-02 03:09:37,082 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:09:37,082 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:09:37,082 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:09:37,083 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:09:37,083 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:10:37 UTC)" executed successfully
2025-06-02 03:09:38,549 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:09:48,614 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:09:58,680 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:10:08,747 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:10:18,814 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:10:28,886 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:10:37,097 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:11:37 UTC)" (scheduled at 2025-06-01 23:10:37.073996+00:00)
2025-06-02 03:10:37,097 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:10:37,097 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:10:37,097 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:10:37,097 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:10:37,097 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:11:37 UTC)" executed successfully
2025-06-02 03:10:38,952 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:10:49,017 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:10:59,083 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:11:09,152 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:11:19,219 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:11:29,290 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:11:37,096 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:12:37 UTC)" (scheduled at 2025-06-01 23:11:37.073996+00:00)
2025-06-02 03:11:37,096 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:11:37,096 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:11:37,096 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:11:37,097 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:11:37,097 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:12:37 UTC)" executed successfully
2025-06-02 03:11:39,360 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:11:49,426 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:11:59,495 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:12:09,565 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:12:19,630 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:12:29,698 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:12:37,084 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:13:37 UTC)" (scheduled at 2025-06-01 23:12:37.073996+00:00)
2025-06-02 03:12:37,084 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:12:37,084 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:12:37,085 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:12:37,086 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:12:37,086 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:13:37 UTC)" executed successfully
2025-06-02 03:12:39,763 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:12:49,830 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:12:59,899 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:13:09,966 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:13:20,033 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:13:30,103 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:13:37,086 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:14:37 UTC)" (scheduled at 2025-06-01 23:13:37.073996+00:00)
2025-06-02 03:13:37,086 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:13:37,086 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:13:37,086 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:13:37,087 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:13:37,087 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:14:37 UTC)" executed successfully
2025-06-02 03:13:40,169 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:13:50,236 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:14:00,302 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:14:10,368 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:14:20,435 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:14:30,501 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:14:37,085 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:15:37 UTC)" (scheduled at 2025-06-01 23:14:37.073996+00:00)
2025-06-02 03:14:37,085 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:14:37,085 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:14:37,086 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:14:37,118 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:14:37,118 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:15:37 UTC)" executed successfully
2025-06-02 03:14:40,570 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:14:50,640 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:15:00,706 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:15:10,776 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:15:20,842 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:15:30,909 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:15:37,082 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:16:37 UTC)" (scheduled at 2025-06-01 23:15:37.073996+00:00)
2025-06-02 03:15:37,083 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:15:37,083 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:15:37,083 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:15:37,120 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:15:37,121 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:16:37 UTC)" executed successfully
2025-06-02 03:15:40,979 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:15:51,047 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:16:01,115 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:16:11,181 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:16:21,249 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:16:31,317 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:16:37,083 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:17:37 UTC)" (scheduled at 2025-06-01 23:16:37.073996+00:00)
2025-06-02 03:16:37,085 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:16:37,085 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:16:37,085 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:16:37,087 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:16:37,087 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:17:37 UTC)" executed successfully
2025-06-02 03:16:41,386 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:16:51,454 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:17:01,520 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:17:11,589 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:17:21,658 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:17:31,724 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:17:37,078 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:18:37 UTC)" (scheduled at 2025-06-01 23:17:37.073996+00:00)
2025-06-02 03:17:37,078 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:17:37,078 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:17:37,078 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:17:37,108 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:17:37,108 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:18:37 UTC)" executed successfully
2025-06-02 03:17:41,790 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:17:51,858 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:18:01,930 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:18:11,996 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:18:22,063 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:18:32,132 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:18:37,086 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:19:37 UTC)" (scheduled at 2025-06-01 23:18:37.073996+00:00)
2025-06-02 03:18:37,086 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:18:37,086 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:18:37,087 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:18:37,112 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:18:37,112 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:19:37 UTC)" executed successfully
2025-06-02 03:18:42,199 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:18:52,266 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:19:02,331 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:19:12,397 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:19:22,464 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:19:28,778 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:19:28,778 - INFO - Application is stopping. This might take a moment.
2025-06-02 03:19:28,778 - INFO - Scheduler has been shut down
2025-06-02 03:19:28,779 - INFO - Application.stop() complete
2025-06-02 03:19:28,781 - INFO - [smart_bot] Bot post_shutdown_hook: Сохранение данных...
2025-06-02 03:19:28,786 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_031928.json
2025-06-02 03:19:28,788 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 03:19:28,791 - INFO - Удалена старая резервная копия: backups\user_settings.json.backup_20250531_221906
2025-06-02 03:19:28,804 - INFO - Резервная копия создана для addresses.json в backups\addresses.backup_20250602_031928.json
2025-06-02 03:19:28,807 - INFO - Данные успешно сохранены в addresses.json
2025-06-02 03:19:28,809 - INFO - Удалена старая резервная копия: backups\addresses.json.backup_20250531_211849
2025-06-02 03:19:28,813 - INFO - Резервная копия создана для notified.json в backups\notified.backup_20250602_031928.json
2025-06-02 03:19:28,814 - INFO - Данные успешно сохранены в notified.json
2025-06-02 03:19:28,817 - INFO - Удалена старая резервная копия: backups\notified.json.backup_20250531_211849
2025-06-02 03:19:28,817 - INFO - Данные успешно сохранены перед выключением.
2025-06-02 03:19:28,817 - INFO - Бот остановлен.
2025-06-02 03:19:34,991 - INFO - ЗАПУСК НОВОЙ ВЕРСИИ БОТА (с исправлениями от 2025-06-02 03:19:34)
2025-06-02 03:19:34,991 - INFO - Запуск CheckSiteUpdateBot с уровнем логирования: INFO
2025-06-02 03:19:34,991 - INFO - [smart_bot] main: bot_shared_data prepared. Keys: ['user_settings_ref', 'save_user_settings_async_func', 'reply_markup_for_lang_func', 'UserStepsEnum', 'USER_DATA_STEP_KEY', 'USER_DATA_LANG_KEY', 'premium_tiers_ref', 'user_addresses_ref', 'save_tracked_data_async_func', 'translations_ref', 'config_ref']
2025-06-02 03:19:34,991 - INFO - [smart_bot] main: bot_shared_data function 'save_user_settings_async_func' is callable.
2025-06-02 03:19:34,991 - INFO - [smart_bot] main: bot_shared_data function 'reply_markup_for_lang_func' is callable.
2025-06-02 03:19:34,992 - INFO - [smart_bot] main: bot_shared_data function 'UserStepsEnum' is callable.
2025-06-02 03:19:34,992 - INFO - [smart_bot] main: bot_shared_data function 'save_tracked_data_async_func' is callable.
2025-06-02 03:19:37,198 - INFO - [smart_bot] main: Application built successfully with bot_data.
2025-06-02 03:19:37,198 - INFO - [smart_bot] main: CommandHandlers registered.
2025-06-02 03:19:37,198 - INFO - [smart_bot] main: Message and CallbackQuery Handlers registered.
2025-06-02 03:19:37,204 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-02 03:19:37,205 - INFO - [smart_bot] main: JobQueue task 'periodic_site_check_job' scheduled to run every 60s.
2025-06-02 03:19:37,205 - INFO - Бот начал опрос...
2025-06-02 03:19:37,482 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getMe "HTTP/1.1 200 OK"
2025-06-02 03:19:37,508 - INFO - [smart_bot] Bot post_init_hook: Загрузка данных...
2025-06-02 03:19:37,511 - INFO - Загружены настройки для 1 пользователей.
2025-06-02 03:19:37,514 - INFO - Загружены адреса для 1 пользователей.
2025-06-02 03:19:37,515 - INFO - Загружена история уведомлений для 0 пользователей.
2025-06-02 03:19:37,515 - INFO - Данные бота успешно загружены.
2025-06-02 03:19:37,594 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/deleteWebhook "HTTP/1.1 200 OK"
2025-06-02 03:19:37,596 - INFO - Added job "periodic_site_check_job" to job store "default"
2025-06-02 03:19:37,596 - INFO - Scheduler started
2025-06-02 03:19:37,596 - INFO - Application started
2025-06-02 03:19:37,809 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:19:37,810 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f Изменить язык', lang='ru', current_step='UserSteps.NONE'
2025-06-02 03:19:37,811 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f Изменить язык'
2025-06-02 03:19:37,811 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 03:19:37,897 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:19:47,207 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:20:47 UTC)" (scheduled at 2025-06-01 23:19:47.198725+00:00)
2025-06-02 03:19:47,207 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:19:47,207 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:19:47,208 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:19:47,209 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:19:47,210 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:20:47 UTC)" executed successfully
2025-06-02 03:19:47,882 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:19:57,954 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:20:08,034 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:20:18,108 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:20:28,180 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:20:38,252 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:20:47,208 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:21:47 UTC)" (scheduled at 2025-06-01 23:20:47.198725+00:00)
2025-06-02 03:20:47,208 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:20:47,208 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:20:47,208 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:20:47,209 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:20:47,209 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:21:47 UTC)" executed successfully
2025-06-02 03:20:48,335 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:20:57,386 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:20:57,387 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\U0001f1f7\U0001f1fa Русский', lang='ru', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 03:20:57,387 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text '\U0001f1f7\U0001f1fa Русский'
2025-06-02 03:20:57,393 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_032057.json
2025-06-02 03:20:57,395 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 03:20:57,398 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_021716.json
2025-06-02 03:20:57,717 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:20:57,718 - INFO - [smart_bot] Language set to 'ru' for user 7230593037. Step reset to NONE.
2025-06-02 03:21:07,470 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:21:17,546 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:21:27,618 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:21:37,693 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:21:47,216 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:22:47 UTC)" (scheduled at 2025-06-01 23:21:47.198725+00:00)
2025-06-02 03:21:47,216 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:21:47,217 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:21:47,217 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:21:47,218 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:21:47,218 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:22:47 UTC)" executed successfully
2025-06-02 03:21:47,770 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:21:57,849 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:22:07,922 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:22:17,996 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:22:28,068 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:22:38,146 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:22:47,212 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:23:47 UTC)" (scheduled at 2025-06-01 23:22:47.198725+00:00)
2025-06-02 03:22:47,212 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:22:47,212 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:22:47,213 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:22:47,213 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:22:47,213 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:23:47 UTC)" executed successfully
2025-06-02 03:22:48,219 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:22:58,294 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:23:08,369 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:23:18,440 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:23:28,511 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:23:38,589 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:23:47,200 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:24:47 UTC)" (scheduled at 2025-06-01 23:23:47.198725+00:00)
2025-06-02 03:23:47,200 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:23:47,200 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:23:47,201 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:23:47,201 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:23:47,201 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:24:47 UTC)" executed successfully
2025-06-02 03:23:48,661 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:23:58,733 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:24:08,805 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:24:18,883 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:24:28,957 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:24:39,033 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:24:47,203 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:25:47 UTC)" (scheduled at 2025-06-01 23:24:47.198725+00:00)
2025-06-02 03:24:47,203 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:24:47,203 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:24:47,203 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:24:47,204 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:24:47,204 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:25:47 UTC)" executed successfully
2025-06-02 03:24:49,110 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:24:55,414 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:24:55,416 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f Изменить язык', lang='ru', current_step='UserSteps.NONE'
2025-06-02 03:24:55,416 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f Изменить язык'
2025-06-02 03:24:55,416 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 03:24:55,752 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:24:58,692 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:24:58,693 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\U0001f1f7\U0001f1fa Русский', lang='ru', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 03:24:58,693 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text '\U0001f1f7\U0001f1fa Русский'
2025-06-02 03:24:58,698 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_032458.json
2025-06-02 03:24:58,701 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 03:24:58,704 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_021727.json
2025-06-02 03:24:58,816 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:24:58,817 - INFO - [smart_bot] Language set to 'ru' for user 7230593037. Step reset to NONE.
2025-06-02 03:25:01,351 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:25:01,352 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f Изменить язык', lang='ru', current_step='UserSteps.NONE'
2025-06-02 03:25:01,352 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f Изменить язык'
2025-06-02 03:25:01,352 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 03:25:01,466 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:25:02,753 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:25:02,754 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\U0001f1e6\U0001f1f2 \u0540\u0561\u0575\u0565\u0580\u0565\u0576', lang='ru', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 03:25:02,754 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text '\U0001f1e6\U0001f1f2 \u0540\u0561\u0575\u0565\u0580\u0565\u0576'
2025-06-02 03:25:02,759 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_032502.json
2025-06-02 03:25:02,761 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 03:25:02,764 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_022315.json
2025-06-02 03:25:02,867 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:25:02,868 - INFO - [smart_bot] Language set to 'hy' for user 7230593037. Step reset to NONE.
2025-06-02 03:25:05,177 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:25:05,178 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f \u0553\u0578\u056d\u0565\u056c \u056c\u0565\u0566\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 03:25:05,178 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f \u0553\u0578\u056d\u0565\u056c \u056c\u0565\u0566\u0578\u0582\u0576'
2025-06-02 03:25:05,178 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 03:25:05,283 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:25:06,678 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:25:06,679 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\U0001f1fa\U0001f1f8 English', lang='hy', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 03:25:06,679 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text '\U0001f1fa\U0001f1f8 English'
2025-06-02 03:25:06,685 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_032506.json
2025-06-02 03:25:06,687 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 03:25:06,689 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_022319.json
2025-06-02 03:25:06,795 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:25:06,796 - INFO - [smart_bot] Language set to 'en' for user 7230593037. Step reset to NONE.
2025-06-02 03:25:09,101 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:25:09,102 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f Change language', lang='en', current_step='UserSteps.NONE'
2025-06-02 03:25:09,102 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f Change language'
2025-06-02 03:25:09,102 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 03:25:09,293 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:25:12,198 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:25:12,199 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\U0001f1e6\U0001f1f2 \u0540\u0561\u0575\u0565\u0580\u0565\u0576', lang='en', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 03:25:12,199 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text '\U0001f1e6\U0001f1f2 \u0540\u0561\u0575\u0565\u0580\u0565\u0576'
2025-06-02 03:25:12,204 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_032512.json
2025-06-02 03:25:12,206 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 03:25:12,208 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_031928.json
2025-06-02 03:25:12,307 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:25:12,307 - INFO - [smart_bot] Language set to 'hy' for user 7230593037. Step reset to NONE.
2025-06-02 03:25:17,554 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:25:17,554 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2b50 \u0532\u0561\u056a\u0561\u0576\u0578\u0580\u0564\u0561\u0563\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 03:25:17,555 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2b50 \u0532\u0561\u056a\u0561\u0576\u0578\u0580\u0564\u0561\u0563\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576'
2025-06-02 03:25:17,555 - INFO - [smart_bot] show_subscription_options called for user 7230593037
2025-06-02 03:25:17,813 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:25:17,815 - INFO - [smart_bot] User 7230593037 step set to AWAITING_SUBSCRIPTION_CHOICE
2025-06-02 03:25:27,628 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:25:37,706 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:25:47,207 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:26:47 UTC)" (scheduled at 2025-06-01 23:25:47.198725+00:00)
2025-06-02 03:25:47,207 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:25:47,207 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:25:47,208 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:25:47,208 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:25:47,208 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:26:47 UTC)" executed successfully
2025-06-02 03:25:47,777 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:25:57,850 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:26:07,923 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:26:17,998 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:26:28,068 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:26:38,140 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:26:47,199 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:27:47 UTC)" (scheduled at 2025-06-01 23:26:47.198725+00:00)
2025-06-02 03:26:47,199 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:26:47,199 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:26:47,200 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:26:47,200 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:26:47,200 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:27:47 UTC)" executed successfully
2025-06-02 03:26:48,216 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:26:58,290 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:27:08,360 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:27:18,431 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:27:19,882 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:27:19,883 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u23f1\ufe0f \u054d\u0561\u0570\u0574\u0561\u0576\u0565\u056c \u0570\u0561\u0573\u0561\u056d\u0561\u056f\u0561\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568', lang='hy', current_step='UserSteps.AWAITING_SUBSCRIPTION_CHOICE'
2025-06-02 03:27:19,883 - INFO - [smart_bot] User 7230593037 is in AWAITING_SUBSCRIPTION_CHOICE but sent text '\u23f1\ufe0f \u054d\u0561\u0570\u0574\u0561\u0576\u0565\u056c \u0570\u0561\u0573\u0561\u056d\u0561\u056f\u0561\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568'. This step expects a CallbackQuery.
2025-06-02 03:27:20,196 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:27:29,959 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:27:40,032 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:27:47,201 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:28:47 UTC)" (scheduled at 2025-06-01 23:27:47.198725+00:00)
2025-06-02 03:27:47,201 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:27:47,201 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:27:47,201 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:27:47,202 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:27:47,202 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:28:47 UTC)" executed successfully
2025-06-02 03:27:50,126 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:27:59,808 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:27:59,809 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u23f1\ufe0f \u054d\u0561\u0570\u0574\u0561\u0576\u0565\u056c \u0570\u0561\u0573\u0561\u056d\u0561\u056f\u0561\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568', lang='hy', current_step='UserSteps.NONE'
2025-06-02 03:27:59,809 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u23f1\ufe0f \u054d\u0561\u0570\u0574\u0561\u0576\u0565\u056c \u0570\u0561\u0573\u0561\u056d\u0561\u056f\u0561\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568'
2025-06-02 03:27:59,809 - INFO - [smart_bot] 'Set Frequency' button pressed by user 7230593037. Calling set_frequency_command.
2025-06-02 03:27:59,809 - INFO - [handlers] set_frequency_command called
2025-06-02 03:27:59,809 - ERROR - [handlers] set_frequency_command: Critical data (UserStepsEnum, keys, user_settings_ref, translations_ref) not found in bot_data.
2025-06-02 03:28:00,113 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:28:09,881 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:28:19,958 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:28:30,029 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:28:40,102 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:28:46,189 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:28:46,190 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u23f1\ufe0f \u054d\u0561\u0570\u0574\u0561\u0576\u0565\u056c \u0570\u0561\u0573\u0561\u056d\u0561\u056f\u0561\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568', lang='hy', current_step='UserSteps.NONE'
2025-06-02 03:28:46,191 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u23f1\ufe0f \u054d\u0561\u0570\u0574\u0561\u0576\u0565\u056c \u0570\u0561\u0573\u0561\u056d\u0561\u056f\u0561\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568'
2025-06-02 03:28:46,191 - INFO - [smart_bot] 'Set Frequency' button pressed by user 7230593037. Calling set_frequency_command.
2025-06-02 03:28:46,191 - INFO - [handlers] set_frequency_command called
2025-06-02 03:28:46,191 - ERROR - [handlers] set_frequency_command: Critical data (UserStepsEnum, keys, user_settings_ref, translations_ref) not found in bot_data.
2025-06-02 03:28:46,421 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:28:47,208 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:29:47 UTC)" (scheduled at 2025-06-01 23:28:47.198725+00:00)
2025-06-02 03:28:47,209 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:28:47,209 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:28:47,209 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:28:47,209 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:28:47,210 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:29:47 UTC)" executed successfully
2025-06-02 03:28:49,395 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:28:49,396 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2795 \u0531\u057e\u0565\u056c\u0561\u0581\u0576\u0565\u056c \u0570\u0561\u057d\u0581\u0565', lang='hy', current_step='UserSteps.NONE'
2025-06-02 03:28:49,396 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2795 \u0531\u057e\u0565\u056c\u0561\u0581\u0576\u0565\u056c \u0570\u0561\u057d\u0581\u0565'
2025-06-02 03:28:49,483 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:28:51,447 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:28:51,448 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u0535\u0580\u0587\u0561\u0576', lang='hy', current_step='UserSteps.AWAITING_REGION'
2025-06-02 03:28:51,537 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:28:55,466 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:28:55,467 - INFO - [smart_bot] handle_text_message: user=7230593037, text='Шерам', lang='hy', current_step='UserSteps.AWAITING_STREET'
2025-06-02 03:28:55,472 - INFO - Резервная копия создана для addresses.json в backups\addresses.backup_20250602_032855.json
2025-06-02 03:28:55,474 - INFO - Данные успешно сохранены в addresses.json
2025-06-02 03:28:55,476 - INFO - Удалена старая резервная копия: backups\addresses.json.backup_20250531_220436
2025-06-02 03:28:55,480 - INFO - Резервная копия создана для notified.json в backups\notified.backup_20250602_032855.json
2025-06-02 03:28:55,484 - INFO - Данные успешно сохранены в notified.json
2025-06-02 03:28:55,486 - INFO - Удалена старая резервная копия: backups\notified.json.backup_20250531_220436
2025-06-02 03:28:55,582 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:28:55,583 - INFO - Starting parse_all_water_announcements_async...
2025-06-02 03:28:55,583 - INFO - Fetching water announcements from https://interactive.vjur.am/ (async)...
2025-06-02 03:28:56,645 - INFO - Starting parse_all_gas_announcements_async...
2025-06-02 03:28:56,645 - INFO - Fetching gas announcements (async)...
2025-06-02 03:28:57,666 - INFO - Fetching from https://armenia-am.gazprom.com/notice/announcement/vtar/...
2025-06-02 03:28:57,667 - INFO - Starting parse_all_electric_announcements_async...
2025-06-02 03:28:57,667 - INFO - Fetching electric announcements from https://www.ena.am/Info.aspx?id=5&lang=1 (async)...
2025-06-02 03:28:58,796 - INFO - HTTP Request: GET https://interactive.vjur.am/ "HTTP/1.1 200 OK"
2025-06-02 03:28:58,826 - INFO - Fetched 10 raw water announcements from https://interactive.vjur.am/.
2025-06-02 03:28:58,826 - INFO - Fetched 10 water texts. Starting extraction...
2025-06-02 03:28:58,826 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 03:28:58,826 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 03:28:58,826 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 03:28:58,827 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 03:28:58,827 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 03:28:58,827 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 03:28:58,827 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 03:28:58,827 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 03:28:58,827 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 03:28:58,827 - INFO - Extracting water info for text (first 70 chars): «\u054e\u0565\u0578\u056c\u056b\u0561 \u054b\u0578\u0582\u0580» \u0568\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568 \u057f\u0565\u0572\u0565\u056f\u0561\u0581\u0576\u0578\u0582\u0574 \u0567 \u056b\u0580 \u0570\u0561\u0573\u0561\u056d\u0578\u0580\u0564\u0576\u0565\u0580\u056b\u0576 \u0587 \u057d\u057a\u0561\u057c\u0578\u0572\u0576\u0565\u0580...
2025-06-02 03:28:58,827 - ERROR - Exception during water info extraction task for text 1: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 03:28:58,828 - ERROR - Exception during water info extraction task for text 2: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 03:28:58,828 - ERROR - Exception during water info extraction task for text 3: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 03:28:58,828 - ERROR - Exception during water info extraction task for text 4: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 03:28:58,828 - ERROR - Exception during water info extraction task for text 5: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 03:28:58,828 - ERROR - Exception during water info extraction task for text 6: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 03:28:58,828 - ERROR - Exception during water info extraction task for text 7: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 03:28:58,828 - ERROR - Exception during water info extraction task for text 8: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 03:28:58,828 - ERROR - Exception during water info extraction task for text 9: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 03:28:58,828 - ERROR - Exception during water info extraction task for text 10: name 'datetime' is not defined - name 'datetime' is not defined
NoneType: None
2025-06-02 03:28:58,828 - INFO - Total water announcements successfully processed into JSON: 0 (out of 10 fetched raw texts)
2025-06-02 03:28:58,843 - INFO - HTTP Request: GET https://www.ena.am/Info.aspx?id=5&lang=1 "HTTP/1.1 200 OK"
2025-06-02 03:28:59,003 - INFO - No electric announcements found with 'div.items div.panel-group div.panel-body' on https://www.ena.am/Info.aspx?id=5&lang=1. Found 0 items.
2025-06-02 03:28:59,003 - INFO - Fetched 0 raw electric announcements from https://www.ena.am/Info.aspx?id=5&lang=1.
2025-06-02 03:28:59,003 - INFO - No electric announcement texts fetched.
2025-06-02 03:28:59,120 - INFO - HTTP Request: GET https://armenia-am.gazprom.com/notice/announcement/vtar/ "HTTP/1.1 200 OK"
2025-06-02 03:28:59,158 - INFO - No gas announcements found with selector on https://armenia-am.gazprom.com/notice/announcement/vtar/
2025-06-02 03:28:59,158 - INFO - Fetched 0 items from https://armenia-am.gazprom.com/notice/announcement/vtar/
2025-06-02 03:28:59,159 - INFO - Fetching from https://armenia-am.gazprom.com/notice/announcement/plan/...
2025-06-02 03:28:59,416 - INFO - HTTP Request: GET https://armenia-am.gazprom.com/notice/announcement/plan/ "HTTP/1.1 200 OK"
2025-06-02 03:28:59,457 - INFO - No gas announcements found with selector on https://armenia-am.gazprom.com/notice/announcement/plan/
2025-06-02 03:28:59,457 - INFO - Fetched 0 items from https://armenia-am.gazprom.com/notice/announcement/plan/
2025-06-02 03:28:59,457 - INFO - Total fetched 0 raw gas announcements from all sources.
2025-06-02 03:28:59,457 - INFO - No gas announcement texts fetched.
2025-06-02 03:28:59,550 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:29:05,541 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:29:15,619 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:29:22,650 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:29:22,651 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\U0001f4ca \u054e\u056b\u0573\u0561\u056f\u0561\u0563\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 03:29:22,651 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\U0001f4ca \u054e\u056b\u0573\u0561\u056f\u0561\u0563\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576'
2025-06-02 03:29:22,651 - INFO - [smart_bot] show_statistics_command from user 7230593037
2025-06-02 03:29:22,956 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:29:32,726 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:29:42,798 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:29:47,209 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:30:47 UTC)" (scheduled at 2025-06-01 23:29:47.198725+00:00)
2025-06-02 03:29:47,209 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:29:47,210 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:29:47,210 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:29:47,210 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:29:47,210 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:30:47 UTC)" executed successfully
2025-06-02 03:29:52,875 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:30:02,948 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:30:13,027 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:30:23,101 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:30:33,175 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:30:43,247 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:30:47,213 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:31:47 UTC)" (scheduled at 2025-06-01 23:30:47.198725+00:00)
2025-06-02 03:30:47,213 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:30:47,213 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:30:47,214 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:30:47,214 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:30:47,214 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:31:47 UTC)" executed successfully
2025-06-02 03:30:53,317 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:31:03,388 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:31:13,463 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:31:23,572 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:31:33,644 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:31:33,755 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:31:33,756 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2753 \u0555\u0563\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 03:31:33,757 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2753 \u0555\u0563\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576'
2025-06-02 03:31:33,757 - INFO - [smart_bot] show_help_command from user 7230593037
2025-06-02 03:31:34,062 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:31:43,830 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:31:47,212 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:32:47 UTC)" (scheduled at 2025-06-01 23:31:47.198725+00:00)
2025-06-02 03:31:47,212 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:31:47,212 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:31:47,212 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:31:47,213 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:31:47,213 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:32:47 UTC)" executed successfully
2025-06-02 03:31:53,904 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:32:03,975 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:32:14,051 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:32:24,125 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:32:34,197 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:32:44,268 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:32:47,205 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:33:47 UTC)" (scheduled at 2025-06-01 23:32:47.198725+00:00)
2025-06-02 03:32:47,205 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:32:47,205 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:32:47,206 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:32:47,206 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:32:47,206 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:33:47 UTC)" executed successfully
2025-06-02 03:32:54,340 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:33:04,411 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:33:14,483 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:33:24,555 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:33:34,626 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:33:44,700 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:33:47,213 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:34:47 UTC)" (scheduled at 2025-06-01 23:33:47.198725+00:00)
2025-06-02 03:33:47,213 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:33:47,213 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:33:47,214 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:33:47,214 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:33:47,215 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:34:47 UTC)" executed successfully
2025-06-02 03:33:54,773 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:34:04,844 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:34:14,918 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:34:24,995 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:34:35,291 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:34:45,367 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:34:47,200 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:35:47 UTC)" (scheduled at 2025-06-01 23:34:47.198725+00:00)
2025-06-02 03:34:47,201 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:34:47,201 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:34:47,201 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:34:47,201 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:34:47,202 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:35:47 UTC)" executed successfully
2025-06-02 03:34:55,444 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:35:05,524 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:35:15,601 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:35:25,680 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:35:35,757 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:35:45,831 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:35:47,213 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:36:47 UTC)" (scheduled at 2025-06-01 23:35:47.198725+00:00)
2025-06-02 03:35:47,213 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:35:47,213 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:35:47,214 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:35:47,215 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:35:47,215 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:36:47 UTC)" executed successfully
2025-06-02 03:35:55,906 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:36:05,982 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:36:16,058 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:36:26,139 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:36:36,219 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:36:46,298 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:36:47,204 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:37:47 UTC)" (scheduled at 2025-06-01 23:36:47.198725+00:00)
2025-06-02 03:36:47,204 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:36:47,204 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:36:47,204 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:36:47,205 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:36:47,205 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:37:47 UTC)" executed successfully
2025-06-02 03:36:56,374 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:37:06,453 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:37:16,536 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:37:26,613 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:37:36,689 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:37:46,768 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:37:47,207 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:38:47 UTC)" (scheduled at 2025-06-01 23:37:47.198725+00:00)
2025-06-02 03:37:47,207 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:37:47,207 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:37:47,208 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:37:47,208 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:37:47,209 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:38:47 UTC)" executed successfully
2025-06-02 03:37:56,845 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:38:06,920 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:38:16,993 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:38:27,069 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:38:37,143 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:38:47,214 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:39:47 UTC)" (scheduled at 2025-06-01 23:38:47.198725+00:00)
2025-06-02 03:38:47,214 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:38:47,214 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:38:47,215 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:38:47,215 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:38:47,215 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:39:47 UTC)" executed successfully
2025-06-02 03:38:47,217 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:38:57,291 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:39:07,366 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:39:17,444 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:39:27,519 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:39:32,858 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:39:32,859 - INFO - Application is stopping. This might take a moment.
2025-06-02 03:39:32,859 - INFO - Scheduler has been shut down
2025-06-02 03:39:32,859 - INFO - Application.stop() complete
2025-06-02 03:39:32,861 - INFO - [smart_bot] Bot post_shutdown_hook: Сохранение данных...
2025-06-02 03:39:32,865 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_033932.json
2025-06-02 03:39:32,867 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 03:39:32,871 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_032057.json
2025-06-02 03:39:32,875 - INFO - Резервная копия создана для addresses.json в backups\addresses.backup_20250602_033932.json
2025-06-02 03:39:32,877 - INFO - Данные успешно сохранены в addresses.json
2025-06-02 03:39:32,879 - INFO - Удалена старая резервная копия: backups\addresses.json.backup_20250531_221834
2025-06-02 03:39:32,883 - INFO - Резервная копия создана для notified.json в backups\notified.backup_20250602_033932.json
2025-06-02 03:39:32,886 - INFO - Данные успешно сохранены в notified.json
2025-06-02 03:39:32,888 - INFO - Удалена старая резервная копия: backups\notified.json.backup_20250531_221834
2025-06-02 03:39:32,888 - INFO - Данные успешно сохранены перед выключением.
2025-06-02 03:39:32,889 - INFO - Бот остановлен.
2025-06-02 03:39:43,402 - INFO - ЗАПУСК НОВОЙ ВЕРСИИ БОТА (с исправлениями от 2025-06-02 03:39:43)
2025-06-02 03:39:43,402 - INFO - Запуск CheckSiteUpdateBot с уровнем логирования: INFO
2025-06-02 03:39:43,402 - INFO - [smart_bot] main: bot_shared_data prepared. Keys: ['user_settings_ref', 'save_user_settings_async_func', 'reply_markup_for_lang_func', 'UserStepsEnum', 'USER_DATA_STEP_KEY', 'USER_DATA_LANG_KEY', 'premium_tiers_ref', 'user_addresses_ref', 'save_tracked_data_async_func', 'translations_ref', 'config_ref']
2025-06-02 03:39:43,402 - INFO - [smart_bot] main: bot_shared_data function 'save_user_settings_async_func' is callable.
2025-06-02 03:39:43,403 - INFO - [smart_bot] main: bot_shared_data function 'reply_markup_for_lang_func' is callable.
2025-06-02 03:39:43,403 - INFO - [smart_bot] main: bot_shared_data function 'UserStepsEnum' is callable.
2025-06-02 03:39:43,403 - INFO - [smart_bot] main: bot_shared_data function 'save_tracked_data_async_func' is callable.
2025-06-02 03:39:45,600 - INFO - [smart_bot] main: Application built successfully with bot_data.
2025-06-02 03:39:45,601 - INFO - [smart_bot] main: CommandHandlers registered.
2025-06-02 03:39:45,602 - INFO - [smart_bot] main: Message and CallbackQuery Handlers registered.
2025-06-02 03:39:45,603 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-02 03:39:45,604 - INFO - [smart_bot] main: JobQueue task 'periodic_site_check_job' scheduled to run every 60s.
2025-06-02 03:39:45,604 - INFO - Бот начал опрос...
2025-06-02 03:39:45,861 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getMe "HTTP/1.1 200 OK"
2025-06-02 03:39:45,864 - INFO - [smart_bot] Bot post_init_hook: Загрузка данных...
2025-06-02 03:39:45,866 - INFO - Загружены настройки для 1 пользователей.
2025-06-02 03:39:45,869 - INFO - Загружены адреса для 1 пользователей.
2025-06-02 03:39:45,871 - INFO - Загружена история уведомлений для 0 пользователей.
2025-06-02 03:39:45,871 - INFO - Данные бота успешно загружены.
2025-06-02 03:39:45,942 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/deleteWebhook "HTTP/1.1 200 OK"
2025-06-02 03:39:45,943 - INFO - Added job "periodic_site_check_job" to job store "default"
2025-06-02 03:39:45,943 - INFO - Scheduler started
2025-06-02 03:39:45,943 - INFO - Application started
2025-06-02 03:39:46,164 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:39:46,166 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2753 \u0555\u0563\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 03:39:46,166 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2753 \u0555\u0563\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576'
2025-06-02 03:39:46,166 - INFO - [smart_bot] show_help_command from user 7230593037
2025-06-02 03:39:46,281 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:39:55,609 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:40:55 UTC)" (scheduled at 2025-06-01 23:39:55.602036+00:00)
2025-06-02 03:39:55,609 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:39:55,610 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:39:55,610 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:39:55,611 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:39:55,611 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:40:55 UTC)" executed successfully
2025-06-02 03:39:56,246 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:40:06,328 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:40:16,404 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:40:26,479 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:40:36,555 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:40:46,629 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:40:55,624 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:41:55 UTC)" (scheduled at 2025-06-01 23:40:55.602036+00:00)
2025-06-02 03:40:55,624 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:40:55,624 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:40:55,625 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:40:55,626 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:40:55,626 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:41:55 UTC)" executed successfully
2025-06-02 03:40:56,709 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:41:06,786 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:41:16,865 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:41:26,940 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:41:37,014 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:41:47,090 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:41:55,611 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:42:55 UTC)" (scheduled at 2025-06-01 23:41:55.602036+00:00)
2025-06-02 03:41:55,611 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:41:55,611 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:41:55,611 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:41:55,612 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:41:55,612 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:42:55 UTC)" executed successfully
2025-06-02 03:41:57,167 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:42:07,249 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:42:17,325 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:42:27,399 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:42:37,473 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:42:47,546 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:42:55,611 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:43:55 UTC)" (scheduled at 2025-06-01 23:42:55.602036+00:00)
2025-06-02 03:42:55,611 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:42:55,611 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:42:55,612 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:42:55,612 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:42:55,612 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:43:55 UTC)" executed successfully
2025-06-02 03:42:57,621 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:43:07,693 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:43:17,769 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:43:27,848 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:43:37,927 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:43:48,003 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:43:55,616 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:44:55 UTC)" (scheduled at 2025-06-01 23:43:55.602036+00:00)
2025-06-02 03:43:55,617 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:43:55,617 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:43:55,617 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:43:55,618 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:43:55,618 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:44:55 UTC)" executed successfully
2025-06-02 03:43:58,076 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:44:08,152 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:44:18,238 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:44:28,319 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:44:38,396 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:44:48,469 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:44:55,602 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:45:55 UTC)" (scheduled at 2025-06-01 23:44:55.602036+00:00)
2025-06-02 03:44:55,603 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:44:55,603 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:44:55,603 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:44:55,604 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:44:55,604 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:45:55 UTC)" executed successfully
2025-06-02 03:44:58,542 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:45:08,617 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:45:18,697 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:45:28,771 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:45:38,858 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:45:48,930 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:45:55,606 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:46:55 UTC)" (scheduled at 2025-06-01 23:45:55.602036+00:00)
2025-06-02 03:45:55,607 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:45:55,607 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:45:55,608 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:45:55,608 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:45:55,609 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:46:55 UTC)" executed successfully
2025-06-02 03:45:59,004 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:46:09,078 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:46:19,151 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:46:29,226 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:46:39,300 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:46:49,377 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:46:55,606 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:47:55 UTC)" (scheduled at 2025-06-01 23:46:55.602036+00:00)
2025-06-02 03:46:55,606 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:46:55,606 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:46:55,606 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:46:55,607 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:46:55,607 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:47:55 UTC)" executed successfully
2025-06-02 03:46:59,457 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:47:09,529 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:47:19,603 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:47:29,677 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:47:39,773 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:47:49,846 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:47:55,607 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:48:55 UTC)" (scheduled at 2025-06-01 23:47:55.602036+00:00)
2025-06-02 03:47:55,607 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:47:55,607 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:47:55,607 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:47:55,608 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:47:55,608 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:48:55 UTC)" executed successfully
2025-06-02 03:47:59,923 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:48:10,007 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:48:20,085 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:48:30,159 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:48:40,234 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:48:41,598 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:48:41,599 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f \u0553\u0578\u056d\u0565\u056c \u056c\u0565\u0566\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 03:48:41,599 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f \u0553\u0578\u056d\u0565\u056c \u056c\u0565\u0566\u0578\u0582\u0576'
2025-06-02 03:48:41,600 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 03:48:41,901 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:48:44,707 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:48:44,707 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\U0001f1f7\U0001f1fa Русский', lang='hy', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 03:48:44,708 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text '\U0001f1f7\U0001f1fa Русский'
2025-06-02 03:48:44,714 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_034844.json
2025-06-02 03:48:44,716 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 03:48:44,718 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_032458.json
2025-06-02 03:48:44,807 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:48:44,808 - INFO - [smart_bot] Language set to 'ru' for user 7230593037. Step reset to NONE.
2025-06-02 03:48:54,783 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:48:55,612 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:49:55 UTC)" (scheduled at 2025-06-01 23:48:55.602036+00:00)
2025-06-02 03:48:55,612 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:48:55,612 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:48:55,613 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:48:55,613 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:48:55,613 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:49:55 UTC)" executed successfully
2025-06-02 03:49:04,861 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:49:14,937 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:49:25,016 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:49:26,819 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:49:26,820 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2753 Помощь', lang='ru', current_step='UserSteps.NONE'
2025-06-02 03:49:26,820 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2753 Помощь'
2025-06-02 03:49:26,820 - INFO - [smart_bot] show_help_command from user 7230593037
2025-06-02 03:49:27,080 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:49:36,899 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:49:46,975 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:49:55,611 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:50:55 UTC)" (scheduled at 2025-06-01 23:49:55.602036+00:00)
2025-06-02 03:49:55,611 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:49:55,611 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:49:55,611 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:49:55,612 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:49:55,612 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:50:55 UTC)" executed successfully
2025-06-02 03:49:56,229 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:49:56,230 - INFO - Application is stopping. This might take a moment.
2025-06-02 03:49:56,230 - INFO - Scheduler has been shut down
2025-06-02 03:49:56,230 - INFO - Application.stop() complete
2025-06-02 03:49:56,232 - INFO - [smart_bot] Bot post_shutdown_hook: Сохранение данных...
2025-06-02 03:49:56,236 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_034956.json
2025-06-02 03:49:56,239 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 03:49:56,241 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_032502.json
2025-06-02 03:49:56,245 - INFO - Резервная копия создана для addresses.json в backups\addresses.backup_20250602_034956.json
2025-06-02 03:49:56,248 - INFO - Данные успешно сохранены в addresses.json
2025-06-02 03:49:56,250 - INFO - Удалена старая резервная копия: backups\addresses.backup_20250602_021310.json
2025-06-02 03:49:56,254 - INFO - Резервная копия создана для notified.json в backups\notified.backup_20250602_034956.json
2025-06-02 03:49:56,257 - INFO - Данные успешно сохранены в notified.json
2025-06-02 03:49:56,259 - INFO - Удалена старая резервная копия: backups\notified.backup_20250602_021310.json
2025-06-02 03:49:56,259 - INFO - Данные успешно сохранены перед выключением.
2025-06-02 03:49:56,260 - INFO - Бот остановлен.
2025-06-02 03:50:03,123 - INFO - ЗАПУСК НОВОЙ ВЕРСИИ БОТА (с исправлениями от 2025-06-02 03:50:03)
2025-06-02 03:50:03,123 - INFO - Запуск CheckSiteUpdateBot с уровнем логирования: INFO
2025-06-02 03:50:03,124 - INFO - [smart_bot] main: bot_shared_data prepared. Keys: ['user_settings_ref', 'save_user_settings_async_func', 'reply_markup_for_lang_func', 'UserStepsEnum', 'USER_DATA_STEP_KEY', 'USER_DATA_LANG_KEY', 'premium_tiers_ref', 'user_addresses_ref', 'save_tracked_data_async_func', 'translations_ref', 'config_ref']
2025-06-02 03:50:03,124 - INFO - [smart_bot] main: bot_shared_data function 'save_user_settings_async_func' is callable.
2025-06-02 03:50:03,124 - INFO - [smart_bot] main: bot_shared_data function 'reply_markup_for_lang_func' is callable.
2025-06-02 03:50:03,124 - INFO - [smart_bot] main: bot_shared_data function 'UserStepsEnum' is callable.
2025-06-02 03:50:03,124 - INFO - [smart_bot] main: bot_shared_data function 'save_tracked_data_async_func' is callable.
2025-06-02 03:50:05,330 - INFO - [smart_bot] main: Application built successfully with bot_data.
2025-06-02 03:50:05,331 - INFO - [smart_bot] main: CommandHandlers registered.
2025-06-02 03:50:05,331 - INFO - [smart_bot] main: Message and CallbackQuery Handlers registered.
2025-06-02 03:50:05,333 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-02 03:50:05,333 - INFO - [smart_bot] main: JobQueue task 'periodic_site_check_job' scheduled to run every 60s.
2025-06-02 03:50:05,333 - INFO - Бот начал опрос...
2025-06-02 03:50:05,593 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getMe "HTTP/1.1 200 OK"
2025-06-02 03:50:05,596 - INFO - [smart_bot] Bot post_init_hook: Загрузка данных...
2025-06-02 03:50:05,598 - INFO - Загружены настройки для 1 пользователей.
2025-06-02 03:50:05,600 - INFO - Загружены адреса для 1 пользователей.
2025-06-02 03:50:05,601 - INFO - Загружена история уведомлений для 0 пользователей.
2025-06-02 03:50:05,601 - INFO - Данные бота успешно загружены.
2025-06-02 03:50:05,679 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/deleteWebhook "HTTP/1.1 200 OK"
2025-06-02 03:50:05,681 - INFO - Added job "periodic_site_check_job" to job store "default"
2025-06-02 03:50:05,681 - INFO - Scheduler started
2025-06-02 03:50:05,681 - INFO - Application started
2025-06-02 03:50:05,910 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:50:05,911 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2753 Помощь', lang='ru', current_step='UserSteps.NONE'
2025-06-02 03:50:05,911 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2753 Помощь'
2025-06-02 03:50:05,911 - INFO - [smart_bot] show_help_command from user 7230593037
2025-06-02 03:50:06,006 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 03:50:15,346 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:51:15 UTC)" (scheduled at 2025-06-01 23:50:15.331334+00:00)
2025-06-02 03:50:15,346 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:50:15,346 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:50:15,347 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:50:15,348 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:50:15,348 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:51:15 UTC)" executed successfully
2025-06-02 03:50:16,017 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:50:26,094 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:50:36,170 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:50:46,243 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:50:56,318 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:51:06,400 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:51:15,340 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:52:15 UTC)" (scheduled at 2025-06-01 23:51:15.331334+00:00)
2025-06-02 03:51:15,341 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:51:15,341 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:51:15,341 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:51:15,341 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:51:15,341 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:52:15 UTC)" executed successfully
2025-06-02 03:51:16,476 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:51:26,550 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:51:36,626 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:51:46,707 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:51:56,784 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:52:06,863 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:52:15,336 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:53:15 UTC)" (scheduled at 2025-06-01 23:52:15.331334+00:00)
2025-06-02 03:52:15,337 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:52:15,337 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:52:15,337 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:52:15,338 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:52:15,338 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:53:15 UTC)" executed successfully
2025-06-02 03:52:16,938 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:52:27,013 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:52:37,094 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:52:47,170 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:52:57,244 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:53:07,318 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:53:15,341 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:54:15 UTC)" (scheduled at 2025-06-01 23:53:15.331334+00:00)
2025-06-02 03:53:15,342 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:53:15,342 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:53:15,342 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:53:15,342 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:53:15,342 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:54:15 UTC)" executed successfully
2025-06-02 03:53:17,393 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:53:27,466 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:53:37,542 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:53:47,617 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:53:57,697 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:54:07,770 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:54:15,335 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:55:15 UTC)" (scheduled at 2025-06-01 23:54:15.331334+00:00)
2025-06-02 03:54:15,336 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:54:15,336 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:54:15,336 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:54:15,337 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:54:15,337 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:55:15 UTC)" executed successfully
2025-06-02 03:54:17,850 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:54:27,931 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:54:38,013 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:54:48,087 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:54:58,161 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:55:08,233 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:55:15,337 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:56:15 UTC)" (scheduled at 2025-06-01 23:55:15.331334+00:00)
2025-06-02 03:55:15,337 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:55:15,338 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:55:15,338 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:55:15,338 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:55:15,338 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:56:15 UTC)" executed successfully
2025-06-02 03:55:18,310 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:55:28,388 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:55:38,464 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:55:48,540 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:55:58,614 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:56:08,691 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:56:15,338 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:57:15 UTC)" (scheduled at 2025-06-01 23:56:15.331334+00:00)
2025-06-02 03:56:15,339 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:56:15,339 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:56:15,339 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:56:15,340 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:56:15,340 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:57:15 UTC)" executed successfully
2025-06-02 03:56:18,765 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:56:28,843 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:56:38,920 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:56:48,995 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:56:59,071 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:57:09,146 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:57:15,337 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:58:15 UTC)" (scheduled at 2025-06-01 23:57:15.331334+00:00)
2025-06-02 03:57:15,343 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:57:15,344 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:57:15,344 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:57:15,345 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:57:15,346 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:58:15 UTC)" executed successfully
2025-06-02 03:57:19,228 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:57:29,300 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:57:39,373 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:57:49,446 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:57:59,521 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:58:09,596 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:58:15,338 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:59:15 UTC)" (scheduled at 2025-06-01 23:58:15.331334+00:00)
2025-06-02 03:58:15,338 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:58:15,339 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:58:15,339 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:58:15,339 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:58:15,339 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-01 23:59:15 UTC)" executed successfully
2025-06-02 03:58:19,669 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:58:29,741 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:58:39,819 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:58:49,894 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:58:59,969 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:59:10,044 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:59:15,344 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-02 00:00:15 UTC)" (scheduled at 2025-06-01 23:59:15.331334+00:00)
2025-06-02 03:59:15,344 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 03:59:15,344 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 03:59:15,346 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 03:59:15,346 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 03:59:15,346 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-02 00:00:15 UTC)" executed successfully
2025-06-02 03:59:20,119 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:59:30,203 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:59:40,279 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:59:44,130 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:59:44,131 - INFO - Application is stopping. This might take a moment.
2025-06-02 03:59:44,131 - INFO - Scheduler has been shut down
2025-06-02 03:59:44,131 - INFO - Application.stop() complete
2025-06-02 03:59:44,133 - INFO - [smart_bot] Bot post_shutdown_hook: Сохранение данных...
2025-06-02 03:59:44,137 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_035944.json
2025-06-02 03:59:44,140 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 03:59:44,142 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_032506.json
2025-06-02 03:59:44,147 - INFO - Резервная копия создана для addresses.json в backups\addresses.backup_20250602_035944.json
2025-06-02 03:59:44,149 - INFO - Данные успешно сохранены в addresses.json
2025-06-02 03:59:44,152 - INFO - Удалена старая резервная копия: backups\addresses.backup_20250602_021529.json
2025-06-02 03:59:44,156 - INFO - Резервная копия создана для notified.json в backups\notified.backup_20250602_035944.json
2025-06-02 03:59:44,158 - INFO - Данные успешно сохранены в notified.json
2025-06-02 03:59:44,160 - INFO - Удалена старая резервная копия: backups\notified.backup_20250602_021529.json
2025-06-02 03:59:44,160 - INFO - Данные успешно сохранены перед выключением.
2025-06-02 03:59:44,160 - INFO - Бот остановлен.
2025-06-02 03:59:51,230 - INFO - ЗАПУСК НОВОЙ ВЕРСИИ БОТА (с исправлениями от 2025-06-02 03:59:51)
2025-06-02 03:59:51,230 - INFO - Запуск CheckSiteUpdateBot с уровнем логирования: INFO
2025-06-02 03:59:51,230 - INFO - [smart_bot] main: bot_shared_data prepared. Keys: ['user_settings_ref', 'save_user_settings_async_func', 'reply_markup_for_lang_func', 'UserStepsEnum', 'USER_DATA_STEP_KEY', 'USER_DATA_LANG_KEY', 'premium_tiers_ref', 'user_addresses_ref', 'save_tracked_data_async_func', 'translations_ref', 'config_ref']
2025-06-02 03:59:51,230 - INFO - [smart_bot] main: bot_shared_data function 'save_user_settings_async_func' is callable.
2025-06-02 03:59:51,231 - INFO - [smart_bot] main: bot_shared_data function 'reply_markup_for_lang_func' is callable.
2025-06-02 03:59:51,231 - INFO - [smart_bot] main: bot_shared_data function 'UserStepsEnum' is callable.
2025-06-02 03:59:51,231 - INFO - [smart_bot] main: bot_shared_data function 'save_tracked_data_async_func' is callable.
2025-06-02 03:59:53,551 - INFO - [smart_bot] main: Application built successfully with bot_data.
2025-06-02 03:59:53,551 - INFO - [smart_bot] main: CommandHandlers registered.
2025-06-02 03:59:53,551 - INFO - [smart_bot] main: Message and CallbackQuery Handlers registered.
2025-06-02 03:59:53,553 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-02 03:59:53,553 - INFO - [smart_bot] main: JobQueue task 'periodic_site_check_job' scheduled to run every 60s.
2025-06-02 03:59:53,553 - INFO - Бот начал опрос...
2025-06-02 03:59:53,808 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getMe "HTTP/1.1 200 OK"
2025-06-02 03:59:53,811 - INFO - [smart_bot] Bot post_init_hook: Загрузка данных...
2025-06-02 03:59:53,814 - INFO - Загружены настройки для 1 пользователей.
2025-06-02 03:59:53,815 - INFO - Загружены адреса для 1 пользователей.
2025-06-02 03:59:53,817 - INFO - Загружена история уведомлений для 0 пользователей.
2025-06-02 03:59:53,817 - INFO - Данные бота успешно загружены.
2025-06-02 03:59:53,888 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/deleteWebhook "HTTP/1.1 200 OK"
2025-06-02 03:59:53,889 - INFO - Added job "periodic_site_check_job" to job store "default"
2025-06-02 03:59:53,889 - INFO - Scheduler started
2025-06-02 03:59:53,890 - INFO - Application started
2025-06-02 03:59:59,130 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 03:59:59,131 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f Изменить язык', lang='ru', current_step='UserSteps.NONE'
2025-06-02 03:59:59,132 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f Изменить язык'
2025-06-02 03:59:59,132 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 03:59:59,365 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 04:00:03,567 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-02 00:01:03 UTC)" (scheduled at 2025-06-02 00:00:03.551327+00:00)
2025-06-02 04:00:03,567 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 04:00:03,568 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 04:00:03,568 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 04:00:03,569 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 04:00:03,570 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-02 00:01:03 UTC)" executed successfully
2025-06-02 04:00:06,505 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:00:06,506 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\U0001f1e6\U0001f1f2 \u0540\u0561\u0575\u0565\u0580\u0565\u0576', lang='ru', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 04:00:06,506 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text '\U0001f1e6\U0001f1f2 \u0540\u0561\u0575\u0565\u0580\u0565\u0576'
2025-06-02 04:00:06,512 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_040006.json
2025-06-02 04:00:06,514 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 04:00:06,517 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_032512.json
2025-06-02 04:00:06,769 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 04:00:06,770 - INFO - [smart_bot] Language set to 'hy' for user 7230593037. Step reset to NONE.
2025-06-02 04:00:15,533 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:00:15,534 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2753 \u0555\u0563\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 04:00:15,534 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2753 \u0555\u0563\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576'
2025-06-02 04:00:15,534 - INFO - [smart_bot] show_help_command from user 7230593037
2025-06-02 04:00:15,819 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 04:00:25,620 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:00:35,362 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:00:35,363 - INFO - Application is stopping. This might take a moment.
2025-06-02 04:00:35,364 - INFO - Scheduler has been shut down
2025-06-02 04:00:35,364 - INFO - Application.stop() complete
2025-06-02 04:00:35,367 - INFO - [smart_bot] Bot post_shutdown_hook: Сохранение данных...
2025-06-02 04:00:35,370 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_040035.json
2025-06-02 04:00:35,373 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 04:00:35,376 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_033932.json
2025-06-02 04:00:35,380 - INFO - Резервная копия создана для addresses.json в backups\addresses.backup_20250602_040035.json
2025-06-02 04:00:35,382 - INFO - Данные успешно сохранены в addresses.json
2025-06-02 04:00:35,384 - INFO - Удалена старая резервная копия: backups\addresses.backup_20250602_031928.json
2025-06-02 04:00:35,388 - INFO - Резервная копия создана для notified.json в backups\notified.backup_20250602_040035.json
2025-06-02 04:00:35,390 - INFO - Данные успешно сохранены в notified.json
2025-06-02 04:00:35,393 - INFO - Удалена старая резервная копия: backups\notified.backup_20250602_031928.json
2025-06-02 04:00:35,394 - INFO - Данные успешно сохранены перед выключением.
2025-06-02 04:00:35,394 - INFO - Бот остановлен.
2025-06-02 04:01:37,116 - INFO - ЗАПУСК НОВОЙ ВЕРСИИ БОТА (с исправлениями от 2025-06-02 04:01:37)
2025-06-02 04:01:37,116 - INFO - Запуск CheckSiteUpdateBot с уровнем логирования: INFO
2025-06-02 04:01:37,116 - INFO - [smart_bot] main: bot_shared_data prepared. Keys: ['user_settings_ref', 'save_user_settings_async_func', 'reply_markup_for_lang_func', 'UserStepsEnum', 'USER_DATA_STEP_KEY', 'USER_DATA_LANG_KEY', 'premium_tiers_ref', 'user_addresses_ref', 'save_tracked_data_async_func', 'translations_ref', 'config_ref']
2025-06-02 04:01:37,116 - INFO - [smart_bot] main: bot_shared_data function 'save_user_settings_async_func' is callable.
2025-06-02 04:01:37,116 - INFO - [smart_bot] main: bot_shared_data function 'reply_markup_for_lang_func' is callable.
2025-06-02 04:01:37,116 - INFO - [smart_bot] main: bot_shared_data function 'UserStepsEnum' is callable.
2025-06-02 04:01:37,116 - INFO - [smart_bot] main: bot_shared_data function 'save_tracked_data_async_func' is callable.
2025-06-02 04:01:39,299 - INFO - [smart_bot] main: Application built successfully with bot_data.
2025-06-02 04:01:39,299 - INFO - [smart_bot] main: CommandHandlers registered.
2025-06-02 04:01:39,299 - INFO - [smart_bot] main: Message and CallbackQuery Handlers registered.
2025-06-02 04:01:39,301 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-02 04:01:39,301 - INFO - [smart_bot] main: JobQueue task 'periodic_site_check_job' scheduled to run every 60s.
2025-06-02 04:01:39,301 - INFO - Бот начал опрос...
2025-06-02 04:01:39,627 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getMe "HTTP/1.1 200 OK"
2025-06-02 04:01:39,631 - INFO - [smart_bot] Bot post_init_hook: Загрузка данных...
2025-06-02 04:01:39,634 - INFO - Загружены настройки для 1 пользователей.
2025-06-02 04:01:39,635 - INFO - Загружены адреса для 1 пользователей.
2025-06-02 04:01:39,638 - INFO - Загружена история уведомлений для 0 пользователей.
2025-06-02 04:01:39,638 - INFO - Данные бота успешно загружены.
2025-06-02 04:01:39,714 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/deleteWebhook "HTTP/1.1 200 OK"
2025-06-02 04:01:39,716 - INFO - Added job "periodic_site_check_job" to job store "default"
2025-06-02 04:01:39,716 - INFO - Scheduler started
2025-06-02 04:01:39,716 - INFO - Application started
2025-06-02 04:01:39,957 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:01:39,958 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2753 \u0555\u0563\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 04:01:39,959 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2753 \u0555\u0563\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576'
2025-06-02 04:01:39,959 - INFO - [smart_bot] show_help_command from user 7230593037
2025-06-02 04:01:40,058 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 04:01:46,084 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:01:46,084 - INFO - Application is stopping. This might take a moment.
2025-06-02 04:01:46,085 - INFO - Scheduler has been shut down
2025-06-02 04:01:46,085 - INFO - Application.stop() complete
2025-06-02 04:01:46,088 - INFO - [smart_bot] Bot post_shutdown_hook: Сохранение данных...
2025-06-02 04:01:46,092 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_040146.json
2025-06-02 04:01:46,094 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 04:01:46,097 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_034844.json
2025-06-02 04:01:46,100 - INFO - Резервная копия создана для addresses.json в backups\addresses.backup_20250602_040146.json
2025-06-02 04:01:46,104 - INFO - Данные успешно сохранены в addresses.json
2025-06-02 04:01:46,106 - INFO - Удалена старая резервная копия: backups\addresses.backup_20250602_032855.json
2025-06-02 04:01:46,110 - INFO - Резервная копия создана для notified.json в backups\notified.backup_20250602_040146.json
2025-06-02 04:01:46,112 - INFO - Данные успешно сохранены в notified.json
2025-06-02 04:01:46,114 - INFO - Удалена старая резервная копия: backups\notified.backup_20250602_032855.json
2025-06-02 04:01:46,114 - INFO - Данные успешно сохранены перед выключением.
2025-06-02 04:01:46,115 - INFO - Бот остановлен.
2025-06-02 04:26:26,537 - INFO - ЗАПУСК НОВОЙ ВЕРСИИ БОТА (с исправлениями от 2025-06-02 04:26:26)
2025-06-02 04:26:26,537 - INFO - Запуск CheckSiteUpdateBot с уровнем логирования: INFO
2025-06-02 04:26:26,538 - INFO - [smart_bot] main: bot_shared_data prepared. Keys: ['user_settings_ref', 'save_user_settings_async_func', 'reply_markup_for_lang_func', 'UserStepsEnum', 'USER_DATA_STEP_KEY', 'USER_DATA_LANG_KEY', 'premium_tiers_ref', 'user_addresses_ref', 'save_tracked_data_async_func', 'translations_ref', 'config_ref']
2025-06-02 04:26:26,538 - INFO - [smart_bot] main: bot_shared_data function 'save_user_settings_async_func' is callable.
2025-06-02 04:26:26,538 - INFO - [smart_bot] main: bot_shared_data function 'reply_markup_for_lang_func' is callable.
2025-06-02 04:26:26,538 - INFO - [smart_bot] main: bot_shared_data function 'UserStepsEnum' is callable.
2025-06-02 04:26:26,538 - INFO - [smart_bot] main: bot_shared_data function 'save_tracked_data_async_func' is callable.
2025-06-02 04:26:28,921 - INFO - [smart_bot] main: Application built successfully with bot_data.
2025-06-02 04:26:28,921 - INFO - [smart_bot] main: CommandHandlers registered.
2025-06-02 04:26:28,921 - INFO - [smart_bot] main: Message and CallbackQuery Handlers registered.
2025-06-02 04:26:28,923 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-06-02 04:26:28,923 - INFO - [smart_bot] main: JobQueue task 'periodic_site_check_job' scheduled to run every 60s.
2025-06-02 04:26:28,923 - INFO - Бот начал опрос...
2025-06-02 04:26:29,194 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getMe "HTTP/1.1 200 OK"
2025-06-02 04:26:29,198 - INFO - [smart_bot] Bot post_init_hook: Загрузка данных...
2025-06-02 04:26:29,201 - INFO - Загружены настройки для 1 пользователей.
2025-06-02 04:26:29,203 - INFO - Загружены адреса для 1 пользователей.
2025-06-02 04:26:29,205 - INFO - Загружена история уведомлений для 0 пользователей.
2025-06-02 04:26:29,205 - INFO - Данные бота успешно загружены.
2025-06-02 04:26:29,277 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/deleteWebhook "HTTP/1.1 200 OK"
2025-06-02 04:26:29,279 - INFO - Added job "periodic_site_check_job" to job store "default"
2025-06-02 04:26:29,279 - INFO - Scheduler started
2025-06-02 04:26:29,279 - INFO - Application started
2025-06-02 04:26:32,739 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:26:32,741 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2699\ufe0f \u0553\u0578\u056d\u0565\u056c \u056c\u0565\u0566\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 04:26:32,741 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2699\ufe0f \u0553\u0578\u056d\u0565\u056c \u056c\u0565\u0566\u0578\u0582\u0576'
2025-06-02 04:26:32,741 - INFO - [smart_bot] change_language_command from user 7230593037
2025-06-02 04:26:32,835 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 04:26:34,556 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:26:34,557 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\U0001f1e6\U0001f1f2 \u0540\u0561\u0575\u0565\u0580\u0565\u0576', lang='hy', current_step='UserSteps.AWAITING_LANGUAGE_CHOICE'
2025-06-02 04:26:34,557 - INFO - [smart_bot] handle_text_message: Processing AWAITING_LANGUAGE_CHOICE for text '\U0001f1e6\U0001f1f2 \u0540\u0561\u0575\u0565\u0580\u0565\u0576'
2025-06-02 04:26:34,564 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_042634.json
2025-06-02 04:26:34,566 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 04:26:34,569 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_034956.json
2025-06-02 04:26:34,664 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 04:26:34,665 - INFO - [smart_bot] Language set to 'hy' for user 7230593037. Step reset to NONE.
2025-06-02 04:26:38,722 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:26:38,723 - INFO - [smart_bot] handle_text_message: user=7230593037, text='\u2753 \u0555\u0563\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576', lang='hy', current_step='UserSteps.NONE'
2025-06-02 04:26:38,723 - INFO - [smart_bot] handle_text_message: current_step is NONE, processing main menu button '\u2753 \u0555\u0563\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576'
2025-06-02 04:26:38,723 - INFO - [smart_bot] show_help_command from user 7230593037
2025-06-02 04:26:38,825 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/sendMessage "HTTP/1.1 200 OK"
2025-06-02 04:26:38,928 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-02 00:27:38 UTC)" (scheduled at 2025-06-02 00:26:38.922464+00:00)
2025-06-02 04:26:38,928 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 04:26:38,928 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 04:26:38,929 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 04:26:38,930 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 04:26:38,930 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-02 00:27:38 UTC)" executed successfully
2025-06-02 04:26:48,798 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:26:58,872 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:27:08,947 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:27:19,022 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:27:29,098 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:27:38,941 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-02 00:28:38 UTC)" (scheduled at 2025-06-02 00:27:38.922464+00:00)
2025-06-02 04:27:38,941 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 04:27:38,942 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 04:27:38,942 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 04:27:38,942 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 04:27:38,942 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-02 00:28:38 UTC)" executed successfully
2025-06-02 04:27:39,173 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:27:49,245 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:27:59,315 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:28:09,388 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:28:19,462 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:28:29,535 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:28:38,928 - INFO - Running job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-02 00:29:38 UTC)" (scheduled at 2025-06-02 00:28:38.922464+00:00)
2025-06-02 04:28:38,928 - INFO - [smart_bot] periodic_site_check_job running for 1 users with settings.
2025-06-02 04:28:38,928 - INFO - Запуск периодической проверки для пользователя 7230593037 (частота: 21600s)
2025-06-02 04:28:38,928 - ERROR - Ошибка во время периодической проверки для пользователя 7230593037: 'NoneType' object has no attribute 'get' - 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 1040, in periodic_site_check_job
    await check_site_for_user(user_id, context)
  File "C:\Users\Gevorg\Gevorg_computer\Diploma_work\My\Project_ML\AI\With_llama\smart_bot.py", line 519, in check_site_for_user
    lang = context.user_data.get(USER_DATA_LANG) or user_settings.get(user_id, {}).get("lang", "hy")
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-06-02 04:28:38,929 - INFO - [smart_bot] periodic_site_check_job completed. Active checks performed: 0
2025-06-02 04:28:38,929 - INFO - Job "periodic_site_check_job (trigger: interval[0:01:00], next run at: 2025-06-02 00:29:38 UTC)" executed successfully
2025-06-02 04:28:39,608 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:28:49,680 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:28:59,750 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:29:04,320 - INFO - HTTP Request: POST https://api.telegram.org/botREMOVED/getUpdates "HTTP/1.1 200 OK"
2025-06-02 04:29:04,320 - INFO - Application is stopping. This might take a moment.
2025-06-02 04:29:04,321 - INFO - Scheduler has been shut down
2025-06-02 04:29:04,321 - INFO - Application.stop() complete
2025-06-02 04:29:04,323 - INFO - [smart_bot] Bot post_shutdown_hook: Сохранение данных...
2025-06-02 04:29:04,327 - INFO - Резервная копия создана для user_settings.json в backups\user_settings.backup_20250602_042904.json
2025-06-02 04:29:04,329 - INFO - Данные успешно сохранены в user_settings.json
2025-06-02 04:29:04,332 - INFO - Удалена старая резервная копия: backups\user_settings.backup_20250602_035944.json
2025-06-02 04:29:04,336 - INFO - Резервная копия создана для addresses.json в backups\addresses.backup_20250602_042904.json
2025-06-02 04:29:04,338 - INFO - Данные успешно сохранены в addresses.json
2025-06-02 04:29:04,341 - INFO - Удалена старая резервная копия: backups\addresses.backup_20250602_033932.json
2025-06-02 04:29:04,344 - INFO - Резервная копия создана для notified.json в backups\notified.backup_20250602_042904.json
2025-06-02 04:29:04,346 - INFO - Данные успешно сохранены в notified.json
2025-06-02 04:29:04,350 - INFO - Удалена старая резервная копия: backups\notified.backup_20250602_033932.json
2025-06-02 04:29:04,350 - INFO - Данные успешно сохранены перед выключением.
2025-06-02 04:29:04,350 - INFO - Бот остановлен.
